(()=>{function e(){const e=new Date,t=e.getHours(),n=e.getMinutes(),o=`${t<10?"0"+t:t}:${n<10?"0"+n:n}`;document.getElementById("heure").textContent=o}document.addEventListener("DOMContentLoaded",(function(){function e(e){let n,o,c=!1;e.addEventListener("mousedown",(t=>{c=!0,e.classList.add("dragging"),n=t.clientX-e.getBoundingClientRect().left,o=t.clientY-e.getBoundingClientRect().top})),document.addEventListener("mouseup",(()=>{c&&(c=!1,e.classList.remove("dragging"),t(e))})),document.addEventListener("mousemove",(t=>{if(c){const c=t.clientX-n-1650,a=t.clientY-o-20;e.style.left=`${c}px`,e.style.top=`${a}px`}}))}function t(e){const t=JSON.parse(localStorage.getItem("squares"))||[],n={title:e.querySelector("h2").textContent,description:e.querySelector("p").textContent,category:e.classList[2],position:{left:e.style.left,top:e.style.top}},o=t.findIndex((e=>e.title===n.title));-1!==o&&t.splice(o,1),t.push(n),localStorage.setItem("squares",JSON.stringify(t))}function n(e){const t=JSON.parse(localStorage.getItem("squares"))||[],n=e.querySelector("h2").textContent,o=t.filter((e=>e.title!==n));localStorage.setItem("squares",JSON.stringify(o))}function o(e){const t=e.files[0];t&&function(e,t){const n=new FileReader;n.onload=function(){(e=>{localStorage.setItem("backgroundImage",e),document.body.style.backgroundImage=`url('${e}')`})(n.result)},n.readAsDataURL(e)}(t)}const c=localStorage.getItem("backgroundImage");c&&(document.body.style.backgroundImage=`url('${c}')`);const a=document.querySelector("#addSquareButton"),d=document.querySelector("#showFormButton"),s=document.getElementById("imageInput"),l=document.getElementById("searchInput");d.addEventListener("click",(function(){const e=document.getElementById("squareForm");e.style.display="none"===e.style.display||""===e.style.display?"flex":"none"})),a.addEventListener("click",(function(){const o=document.getElementById("title"),c=document.getElementById("description"),a=document.getElementById("category"),d=document.getElementById("container"),s=document.createElement("div");s.classList.add("square"),s.classList.add("draggable"),s.classList.add(a.value);const l=document.createElement("div");l.classList.add("delete-icon"),l.textContent="X",l.addEventListener("click",(()=>{s.remove(),n(s)}));const i=document.createElement("h2");i.textContent=o.value;const r=document.createElement("p");r.textContent=c.value;const u=document.createElement("p");u.textContent=a.value,s.appendChild(l),s.appendChild(i),s.appendChild(r),s.appendChild(u),d.appendChild(s),o.value="",c.value="",e(s),t(s)})),s.addEventListener("change",(function(){o(this)})),l.addEventListener("keyup",(function(e){"Enter"===e.key&&function(){const e=document.getElementById("searchInput").value.toLowerCase(),t=JSON.parse(localStorage.getItem("postItKeys"))||[],n=[];t.forEach((t=>{const o=JSON.parse(localStorage.getItem("postIts"))[t];o.content.toLowerCase().includes(e)&&n.push(o)})),function(e){const t=document.getElementById("search-results-container");if(t.innerHTML="",0===e.length){const e=document.createElement("p");e.textContent="Aucun résultat trouvé.",t.appendChild(e)}else e.forEach((e=>{const n=document.createElement("div");n.classList.add("search-result");const o=document.createElement("p");o.textContent=e.content;const c=document.createElement("p");c.textContent=e.day;const a=document.createElement("p");a.textContent=e.hour,n.appendChild(o),n.appendChild(c),n.appendChild(a),t.appendChild(n)}))}(n)}()})),(JSON.parse(localStorage.getItem("squares"))||[]).forEach((t=>{const o=document.getElementById("container"),c=document.createElement("div");c.classList.add("square"),c.classList.add("draggable"),c.classList.add(t.category);const a=document.createElement("div");a.classList.add("delete-icon"),a.textContent="X",a.addEventListener("click",(()=>{c.remove(),n(c)}));const d=document.createElement("h2");d.textContent=t.title;const s=document.createElement("p");s.textContent=t.description,c.appendChild(a),c.appendChild(d),c.appendChild(s),o.appendChild(c),e(c),c.style.left=parseFloat(t.position.left)+"px",c.style.top=parseFloat(t.position.top)+"px"}))})),setInterval(e,1e3),e()})();